<div class="bg-gray-800 border border-gray-700 rounded-lg p-8">
    <h2 class="text-2xl font-bold text-white mb-2">Validação da Base de Conhecimento</h2>
    <p class="text-gray-400 mb-6">Revise os itens do manifesto gerado pela IA. Certifique-se de que todas as diretrizes principais foram criadas antes de iniciar o projeto.</p>

    <div class="bg-gray-900 p-6 rounded-md border border-gray-600">
        <h3 class="text-xl font-semibold text-white mb-4">Status dos Documentos e Seções</h3>
        <div id="knowledge-base-status-container" class="space-y-3">
            <!-- O conteúdo será preenchido dinamicamente pelo main.js -->
            <p class="text-center text-blue-400">Carregando status da base de conhecimento...</p>
        </div>
        <div id="validation-overall-status" class="text-center text-gray-400 mt-4"></div>
    </div>

    <div class="mt-8">
        <h3 class="text-xl font-semibold text-white mb-4">Selecione o Tipo de Sistema</h3>
        <div class="flex flex-wrap gap-4">
            <button data-system-type="SaaS" class="system-type-btn bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-transform transform hover:scale-105">SaaS</button>
            <button data-system-type="MicroSaaS" class="system-type-btn bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg transition-transform transform hover:scale-105">MicroSaaS</button>
            <button data-system-type="PWA" class="system-type-btn bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-3 px-6 rounded-lg transition-transform transform hover:scale-105">PWA</button>
            <button data-system-type="MVP" class="system-type-btn bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg transition-transform transform hover:scale-105">MVP</button>
            <button data-system-type="ERP" class="system-type-btn bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition-transform transform hover:scale-105">ERP</button>
        </div>
    </div>

    <div class="flex gap-4 mt-8">
        <button
            data-action="prev_step"
            class="px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors"
        >
            ← Etapa Anterior
        </button>
        <button
            data-action="next_step"
            class="next-button px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-all disabled:bg-gray-500 disabled:cursor-not-allowed"
        >
            Próxima Etapa →
        </button>

        <button
            id="approve-and-start-project-btn"
            data-action="start_project"
            class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold transition-all disabled:bg-gray-500 disabled:cursor-not-allowed"
            disabled
        >
            Iniciar Projeto
        </button>
        <button
            id="taskmaster-setup-btn"
            class="px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-all"
        >
            Configurar Taskmaster
        </button>
    </div>
</div>

<!-- Modal do Taskmaster -->
<div id="taskmaster-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-50">
    <div class="bg-gray-800 border border-gray-700 rounded-xl shadow-lg p-8 max-w-2xl w-full m-4">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-white">Preparar Ambiente de Tarefas</h2>
            <button id="close-taskmaster-modal" class="text-gray-400 hover:text-white text-3xl">&times;</button>
        </div>
        <div id="taskmaster-modal-content" class="space-y-4">
            <p class="text-gray-300">Para continuar, o ambiente de gerenciamento de tarefas (Taskmaster) precisa ser inicializado no diretório do seu projeto.</p>
            <p class="text-gray-400 text-sm">Esta é uma ação única por projeto.</p>
            
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">1. Abra seu terminal (CMD, PowerShell, etc.) e navegue até a pasta do projeto:</label>
                <div class="bg-gray-900 rounded-md p-3">
                    <div class="flex items-center justify-between mb-2">
                        <code id="taskmaster-project-path" class="text-yellow-300 break-all pr-4"></code>
                        <button id="copy-path-btn" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-1 px-3 rounded-lg text-sm flex-shrink-0">Copiar</button>
                    </div>
                </div>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">2. Instale o Taskmaster globalmente (se ainda não instalado):</label>
                <div class="bg-gray-900 rounded-md p-3 mb-4">
                    <div class="flex items-center justify-between">
                        <code class="text-yellow-300">npm i -g task-master-ai</code>
                        <button id="copy-install-btn" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-1 px-3 rounded-lg text-sm">Copiar</button>
                    </div>
                </div>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">3. Execute o comando de inicialização:</label>
                <div class="bg-gray-900 rounded-md p-3">
                    <div class="flex items-center justify-between">
                        <code class="text-yellow-300">task-master init</code>
                        <button id="copy-command-btn" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-1 px-3 rounded-lg text-sm">Copiar</button>
                    </div>
                </div>
            </div>
            
            <p class="text-gray-300 pt-4">3. Após a execução bem-sucedida do comando, clique no botão abaixo para que o Archon AI verifique o ambiente.</p>
        </div>
        <div id="taskmaster-message" class="text-sm text-center h-5 mt-4"></div>
        <div class="flex justify-end items-center gap-4 pt-6">
            <button id="verify-taskmaster-env-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg">Verificar Ambiente</button>
        </div>
    </div>
</div>
