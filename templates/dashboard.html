<!doctype html>
<html>
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Inter%3Awght%40400%3B500%3B700%3B900&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900"
    />

    <title>Archon AI - Painel de Controle</title>
    <link rel="icon" type="image/png" href="/static/assets/5logo_Archon.png" />

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <style>
      /* Estados dos botões do supervisor */
      .supervisor-action-btn.active {
        background-color: #dce8f3 !important;
        color: #141a1f !important;
        border-color: #bfdbfe !important;
      }

      .supervisor-action-btn.processing {
        background-color: #f59e0b !important;
        color: #000 !important;
        border-color: #d97706 !important;
      }
      /* Estilo genérico para qualquer botão em processamento */
      button.processing {
        background-color: #f59e0b !important; /* amber-500 */
        color: #000 !important;
        border-color: #d97706 !important; /* amber-600 */
        cursor: wait !important;
      }

      /* Estilos da sidebar */
      .sidebar-step {
        transition: all 0.3s ease;
        border-left: 4px solid transparent;
      }

      .sidebar-step.current {
        background-color: rgba(59, 130, 246, 0.1);
        border-left-color: #3b82f6;
        transform: translateX(4px);
      }

      .sidebar-step.completed {
        background-color: rgba(16, 185, 129, 0.1);
        border-left-color: #10b981;
      }

      .sidebar-step.pending {
        background-color: rgba(75, 85, 99, 0.1);
        border-left-color: #6b7280;
      }

      .sidebar-step:hover {
        background-color: rgba(75, 85, 99, 0.2);
        transform: translateX(2px);
      }

      .step-number {
        min-width: 2rem;
        height: 2rem;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 0.875rem;
      }

      .step-number.current {
        background-color: #3b82f6;
        color: white;
      }

      .step-number.completed {
        background-color: #10b981;
        color: white;
      }

      .step-number.pending {
        background-color: #6b7280;
        color: white;
      }

      .next-button {
        transition: all 0.2s ease;
      }

      .next-button:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
      }

      .content-section {
        min-height: 400px;
      }

      /* Estilos para sidebar colapsada */
      .sidebar-collapsed {
        width: 0 !important;
        min-width: 0 !important;
        overflow: hidden;
      }

      .sidebar-collapsed #sidebar-content {
        opacity: 0;
        transform: translateX(-20px);
      }

      .sidebar-collapsed .sidebar-step {
        opacity: 0;
        transform: translateX(-20px);
      }

      /* Estilos para sidebar com ícones */
      .sidebar-icons-only {
        width: 80px !important;
        min-width: 80px !important;
        overflow: visible;
      }

      .sidebar-icons-only #sidebar-content {
        display: none;
      }

      .sidebar-icons-only .sidebar-step {
        padding: 12px 8px !important;
        margin-bottom: 8px;
        justify-content: center;
        display: flex;
        align-items: center;
      }

      .sidebar-icons-only .step-content {
        display: none;
      }

      .sidebar-icons-only .step-number {
        display: none;
      }

      .sidebar-icons-only .step-icon {
        display: flex !important;
        align-items: center;
        justify-content: center;
        min-width: 2.5rem;
        height: 2.5rem;
        border-radius: 50%;
        transition: all 0.3s ease;
        position: relative;
      }

      .sidebar-icons-only .step-icon.current {
        background-color: #3b82f6;
        color: white;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        transform: scale(1.1);
      }

      .sidebar-icons-only .step-icon.completed {
        background-color: #10b981;
        color: white;
      }

      .sidebar-icons-only .step-icon.pending {
        background-color: #6b7280;
        color: white;
      }

      .sidebar-icons-only .step-icon:hover {
        transform: scale(1.15);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      }

      .step-icon-container {
        position: relative;
        min-width: 2rem;
      }

      .step-icon {
        position: absolute;
        top: 0;
        left: 0;
        width: 2rem;
        height: 2rem;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
      }

      /* Estilos para modal de API Keys */
      #api-key-modal {
        backdrop-filter: blur(4px);
        animation: fadeIn 0.3s ease-out;
      }

      #api-key-modal #api-key-section {
        animation: slideIn 0.3s ease-out;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-20px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
    </style>
  </head>
  <body>
    <div
      class="relative flex size-full min-h-screen flex-col bg-[#141a1f] dark group/design-root overflow-x-hidden"
      style="font-family: Inter, &quot;Noto Sans&quot;, sans-serif"
    >
      <div class="layout-container flex h-full grow flex-col">
        <header
          class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#2b3640] px-10 py-3"
        >
          <div class="flex items-center gap-4 text-white">
            <img
              src="/static/assets/5logo_Archon.png"
              alt="Archon AI Logo"
              class="w-16 h-16"
            />
            <h2
              class="text-white text-lg font-bold leading-tight tracking-[-0.015em]"
            >
              Archon AI
            </h2>
          </div>
          <div class="flex flex-1 justify-end items-center gap-4">
            <button
              id="btn-toggle-api-section"
              class="flex items-center gap-2 rounded-lg bg-blue-600/20 px-4 py-2 text-sm font-semibold text-blue-300 transition-colors hover:bg-blue-600/30"
            >
              <span>Gerenciar API Keys</span>
            </button>
            <button
              id="btn-shutdown"
              class="flex items-center gap-2 rounded-lg bg-red-600/20 px-4 py-2 text-sm font-semibold text-red-400 transition-colors hover:bg-red-600/30"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-power"
              >
                <path d="M12 2v10" />
                <path d="M18.36 6.64a9 9 0 1 1-12.73 0" />
              </svg>
              <span>Resetar Projeto</span>
            </button>
          </div>
        </header>

        <!-- Layout principal com sidebar -->
        <div class="flex flex-1">
          <!-- Sidebar -->
          <div
            id="sidebar"
            class="w-80 bg-[#1a1f24] border-r border-[#2b3640] flex flex-col transition-all duration-300 ease-in-out"
          >
            <div
              class="p-6 border-b border-[#2b3640] flex items-center justify-between"
            >
              <div id="sidebar-content">
                <h2 class="text-white text-xl font-bold mb-2">
                  Etapas do Projeto
                </h2>
                <p class="text-[#9daebe] text-sm">
                  Siga cada etapa para criar seu projeto
                </p>
              </div>
              <button
                id="sidebar-toggle"
                class="text-[#9daebe] hover:text-white transition-colors p-2 rounded-lg hover:bg-[#2b3640]"
                title="Recolher sidebar"
              >
                <svg
                  id="sidebar-toggle-icon"
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M11 19l-7-7 7-7" />
                  <path d="M21 19l-7-7 7-7" />
                </svg>
              </button>
            </div>

            <!-- Steps Navigation -->
            <div class="flex-1 overflow-y-auto">
              <!-- Etapa 1 -->
              <div
                class="sidebar-step p-4 cursor-pointer"
                data-step="1"
                title="Download Templates"
              >
                <div class="flex items-start gap-3">
                  <div class="step-icon-container">
                    <div class="step-number pending">1</div>
                    <div class="step-icon hidden">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      >
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="7,10 12,15 17,10" />
                        <line x1="12" y1="15" x2="12" y2="3" />
                      </svg>
                    </div>
                  </div>
                  <div class="flex-1 step-content">
                    <h3 class="text-white font-medium mb-1">
                      Download Templates
                    </h3>
                    <p class="text-[#9daebe] text-sm mb-2">
                      Baixe os templates de documentos para guiar seu projeto
                    </p>
                    <div class="text-xs text-blue-400 opacity-75">
                      (Opcional)
                    </div>
                  </div>
                </div>
              </div>

              <!-- Etapa 2 -->
              <div
                class="sidebar-step p-4 cursor-pointer"
                data-step="2"
                title="Base de Conhecimento"
              >
                <div class="flex items-start gap-3">
                  <div class="step-icon-container">
                    <div class="step-number pending">2</div>
                    <div class="step-icon hidden">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      >
                        <path
                          d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
                        />
                        <polyline points="14,2 14,8 20,8" />
                        <line x1="16" y1="13" x2="8" y2="13" />
                        <line x1="16" y1="17" x2="8" y2="17" />
                        <polyline points="10,9 9,9 8,9" />
                      </svg>
                    </div>
                  </div>
                  <div class="flex-1 step-content">
                    <h3 class="text-white font-medium mb-1">
                      Base de Conhecimento
                    </h3>
                    <p class="text-[#9daebe] text-sm mb-2">
                      Faça upload dos documentos preenchidos
                    </p>
                    <div class="text-xs text-blue-400 opacity-75">
                      (Opcional)
                    </div>
                  </div>
                </div>
              </div>

              <!-- Etapa 3 -->
              <div
                class="sidebar-step p-4 cursor-pointer current"
                data-step="3"
                title="Nome do Projeto"
              >
                <div class="flex items-start gap-3">
                  <div class="step-icon-container">
                    <div class="step-number current">3</div>
                    <div class="step-icon hidden">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      >
                        <path d="M9 12l2 2 4-4" />
                        <path
                          d="M21 12c.552 0 1-.448 1-1V5c0-.552-.448-1-1-1H3c-.552 0-1 .448-1 1v6c0 .552.448 1 1 1h9l4-4z"
                        />
                      </svg>
                    </div>
                  </div>
                  <div class="flex-1 step-content">
                    <h3 class="text-white font-medium mb-1">Nome do Projeto</h3>
                    <p class="text-[#9daebe] text-sm mb-2">
                      Defina um nome identificador para seu projeto
                    </p>
                    <div class="text-xs text-red-400 opacity-75">
                      (Obrigatório)
                    </div>
                  </div>
                </div>
              </div>

              <!-- Etapa 4 -->
              <div
                class="sidebar-step p-4 cursor-pointer"
                data-step="4"
                title="Linha do Tempo"
              >
                <div class="flex items-start gap-3">
                  <div class="step-icon-container">
                    <div class="step-number pending">4</div>
                    <div class="step-icon hidden">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      >
                        <circle cx="12" cy="12" r="10" />
                        <polyline points="12,6 12,12 16,14" />
                      </svg>
                    </div>
                  </div>
                  <div class="flex-1 step-content">
                    <h3 class="text-white font-medium mb-1">Linha do Tempo</h3>
                    <p class="text-[#9daebe] text-sm mb-2">
                      Acompanhe o progresso das etapas do projeto
                    </p>
                  </div>
                </div>
              </div>

              <!-- Etapa 5 -->
              <div
                class="sidebar-step p-4 cursor-pointer"
                data-step="5"
                title="Histórico de Execução"
              >
                <div class="flex items-start gap-3">
                  <div class="step-icon-container">
                    <div class="step-number pending">5</div>
                    <div class="step-icon hidden">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      >
                        <path d="M3 3v18h18" />
                        <path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3" />
                      </svg>
                    </div>
                  </div>
                  <div class="flex-1 step-content">
                    <h3 class="text-white font-medium mb-1">
                      Histórico de Execução
                    </h3>
                    <p class="text-[#9daebe] text-sm mb-2">
                      Visualize todas as ações e decisões tomadas
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Botão flutuante para expandir sidebar (quando colapsada) -->
          <button
            id="sidebar-expand-btn"
            class="fixed top-20 left-4 z-10 bg-[#1a1f24] border border-[#2b3640] text-[#9daebe] hover:text-white transition-all p-3 rounded-lg hover:bg-[#2b3640] shadow-lg hidden"
            title="Expandir sidebar"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M13 5l7 7-7 7" />
              <path d="M3 5l7 7-7 7" />
            </svg>
          </button>

          <!-- Conteúdo principal -->
          <div class="flex-1 flex flex-col overflow-hidden">
            <div class="flex-1 overflow-y-auto">
              <div class="p-8">
                <div class="max-w-4xl mx-auto">
                  <!-- Título do Painel -->
                  <div class="flex items-center gap-4 mb-8">
                    <img
                      src="/static/assets/5logo_Archon.png"
                      alt="Logo do Projeto"
                      class="w-24 h-24"
                    />
                    <div>
                      <h1 class="text-3xl font-bold text-white">
                        Painel do Projeto
                      </h1>
                      <p class="text-lg text-[#9daebe]">
                        Monitore o progresso, revise os resultados e gerencie as
                        ações.
                      </p>
                    </div>
                  </div>

                  <!-- Seção de Configuração da API Key -->
                  <!-- Modal de Gerenciamento de API Keys -->
                  <div
                    id="api-key-modal"
                    class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"
                    style="display: none"
                  >
                    <div
                      id="api-key-section"
                      class="bg-[#1f272e] rounded-xl border border-blue-600/50 p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto"
                    >
                      <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center gap-3">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="text-blue-400"
                          >
                            <path
                              d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"
                            />
                          </svg>
                          <h3 class="text-blue-400 text-lg font-semibold">
                            Gerenciar API Keys
                          </h3>
                        </div>
                        <button
                          id="btn-close-api-section"
                          class="text-[#9daebe] hover:text-white transition-colors p-1 rounded"
                          title="Fechar"
                        >
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="20"
                            height="20"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                          >
                            <path d="M18 6L6 18" />
                            <path d="M6 6l12 12" />
                          </svg>
                        </button>
                      </div>

                      <div class="space-y-6">
                        <!-- Lista de API Keys Configuradas -->
                        <div>
                          <h4 class="text-white text-base font-medium mb-3">
                            API Keys Configuradas
                          </h4>
                          <div id="api-keys-list" class="space-y-3">
                            <!-- Lista será preenchida dinamicamente -->
                            <div
                              class="text-[#9daebe] text-sm p-4 border border-dashed border-[#3d4d5c] rounded-lg text-center"
                            >
                              Nenhuma API Key configurada ainda
                            </div>
                          </div>
                        </div>

                        <!-- Adicionar Nova API Key -->
                        <div class="border-t border-[#3d4d5c] pt-6">
                          <h4 class="text-white text-base font-medium mb-4">
                            Adicionar Nova API Key
                          </h4>

                          <div
                            class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"
                          >
                            <div>
                              <label
                                for="api-provider-select"
                                class="text-[#9daebe] text-sm block mb-2"
                                >Provedor</label
                              >
                              <select
                                id="api-provider-select"
                                class="form-select w-full rounded-xl text-white focus:outline-0 focus:ring-0 border border-[#3d4d5c] bg-[#1f272e] focus:border-blue-500 h-12 p-[15px] text-base"
                              >
                                <option value="gemini">Google Gemini</option>
                                <option value="openai">OpenAI</option>
                                <option value="anthropic">
                                  Anthropic Claude
                                </option>
                                <option value="azure">Azure OpenAI</option>
                                <option value="custom">Personalizado</option>
                              </select>
                            </div>

                            <div id="custom-provider-name" class="hidden">
                              <label
                                for="custom-provider-input"
                                class="text-[#9daebe] text-sm block mb-2"
                                >Nome do Provedor</label
                              >
                              <input
                                type="text"
                                id="custom-provider-input"
                                placeholder="Ex: Minha API Custom"
                                class="form-input w-full rounded-xl text-white focus:outline-0 focus:ring-0 border border-[#3d4d5c] bg-[#1f272e] focus:border-blue-500 h-12 placeholder:text-[#9daebe] p-[15px] text-base"
                              />
                            </div>
                          </div>

                          <div class="mb-4">
                            <label
                              for="new-api-key-input"
                              class="text-[#9daebe] text-sm block mb-2"
                              >Chave da API</label
                            >
                            <div class="relative">
                              <input
                                type="password"
                                id="new-api-key-input"
                                placeholder="Cole sua API Key aqui..."
                                class="form-input w-full rounded-xl text-white focus:outline-0 focus:ring-0 border border-[#3d4d5c] bg-[#1f272e] focus:border-blue-500 h-12 placeholder:text-[#9daebe] p-[15px] pr-12 text-base font-mono"
                              />
                              <button
                                type="button"
                                id="toggle-api-key-visibility"
                                class="absolute right-3 top-3 text-[#9daebe] hover:text-white transition-colors"
                              >
                                <svg
                                  id="eye-icon"
                                  xmlns="http://www.w3.org/2000/svg"
                                  width="20"
                                  height="20"
                                  viewBox="0 0 24 24"
                                  fill="none"
                                  stroke="currentColor"
                                  stroke-width="2"
                                  stroke-linecap="round"
                                  stroke-linejoin="round"
                                >
                                  <path
                                    d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"
                                  />
                                  <circle cx="12" cy="12" r="3" />
                                </svg>
                              </button>
                            </div>
                          </div>

                          <div class="flex gap-3 mb-4">
                            <button
                              id="btn-test-api-key"
                              class="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors"
                            >
                              Testar Conexão
                            </button>
                            <button
                              id="btn-save-api-key"
                              class="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors"
                            >
                              Salvar API Key
                            </button>
                          </div>
                        </div>

                        <!-- Output/Status das API Keys -->
                        <div class="border-t border-[#3d4d5c] pt-6">
                          <h4 class="text-white text-base font-medium mb-3">
                            Status e Logs
                          </h4>
                          <div
                            id="api-keys-output"
                            class="bg-[#141a1f] border border-[#3d4d5c] rounded-lg p-4 max-h-40 overflow-y-auto font-mono text-sm"
                          >
                            <div class="text-[#9daebe]">
                              📋 Pronto para configurar API Keys...
                            </div>
                          </div>
                        </div>

                        <div
                          class="bg-blue-600/10 border border-blue-600/30 rounded-lg p-4"
                        >
                          <h5 class="text-blue-300 font-medium mb-2">
                            💡 Dicas:
                          </h5>
                          <ul class="text-[#9daebe] text-sm space-y-1">
                            <li>
                              • As chaves são salvas no arquivo `.env` na raiz
                              do projeto
                            </li>
                            <li>
                              • Reinicie o servidor após salvar novas chaves
                            </li>
                            <li>
                              • Use o botão "Testar Conexão" para validar as
                              chaves
                            </li>
                            <li>
                              • Mantenha suas chaves seguras e não compartilhe
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Conteúdo das etapas -->
                  <div id="step-content">
                    <!-- Etapa 1: Download Templates -->
                    <div id="step-1-content" class="content-section hidden">
                      <div
                        class="bg-[#1f272e]/50 rounded-xl border border-[#3d4d5c] p-6"
                      >
                        <div class="flex items-center gap-3 mb-6">
                          <div
                            class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center"
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="20"
                              height="20"
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              class="text-white"
                            >
                              <path
                                d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"
                              />
                              <polyline points="7,10 12,15 17,10" />
                              <line x1="12" y1="15" x2="12" y2="3" />
                            </svg>
                          </div>
                          <div>
                            <h2 class="text-white text-2xl font-bold">
                              Download Templates
                            </h2>
                            <p class="text-[#9daebe]">
                              Baixe os templates para estruturar seu projeto
                            </p>
                          </div>
                        </div>

                        <div class="space-y-4">
                          <p class="text-[#9daebe] leading-relaxed">
                            Os templates são documentos em Markdown (.md) que
                            servem como guia para definir aspectos importantes
                            do seu projeto. Eles incluem estruturas para
                            arquitetura técnica, regras de negócio, backlog e
                            muito mais.
                          </p>

                          <div
                            class="bg-blue-600/10 border border-blue-600/30 rounded-lg p-4"
                          >
                            <h4 class="text-blue-300 font-medium mb-2">
                              📋 O que está incluído:
                            </h4>
                            <ul class="text-[#9daebe] text-sm space-y-1">
                              <li>• Template de Arquitetura Técnica</li>
                              <li>• Template de Regras de Negócio</li>
                              <li>• Template de Backlog MVP</li>
                              <li>• Template de Fluxos de Usuário</li>
                              <li>• Template de Plano Base</li>
                            </ul>
                          </div>

                          <div class="flex gap-4">
                            <a
                              href="/api/download_templates"
                              class="flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors"
                            >
                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="16"
                                height="16"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                              >
                                <path
                                  d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"
                                />
                                <polyline points="7,10 12,15 17,10" />
                                <line x1="12" y1="15" x2="12" y2="3" />
                              </svg>
                              Download Templates
                            </a>
                            <button
                              class="next-button px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-all"
                              onclick="showStep(2)"
                            >
                              Próxima Etapa →
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Etapa 2: Upload Base de Conhecimento -->
                    <div id="step-2-content" class="content-section hidden">
                      <div
                        class="bg-[#1f272e]/50 rounded-xl border border-[#3d4d5c] p-6"
                      >
                        <div class="flex items-center gap-3 mb-6">
                          <div
                            class="w-10 h-10 bg-violet-600 rounded-lg flex items-center justify-center"
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="20"
                              height="20"
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              class="text-white"
                            >
                              <path
                                d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
                              />
                              <polyline points="14,2 14,8 20,8" />
                              <line x1="16" y1="13" x2="8" y2="13" />
                              <line x1="16" y1="17" x2="8" y2="17" />
                              <polyline points="10,9 9,9 8,9" />
                            </svg>
                          </div>
                          <div>
                            <h2 class="text-white text-2xl font-bold">
                              Base de Conhecimento
                            </h2>
                            <p class="text-[#9daebe]">
                              Faça upload dos documentos preenchidos
                            </p>
                          </div>
                        </div>

                        <div class="space-y-4">
                          <p class="text-[#9daebe] leading-relaxed">
                            Após baixar e preencher os templates na etapa
                            anterior, faça o upload dos arquivos aqui. Eles
                            serão utilizados como base de conhecimento para o
                            Archon AI gerar seu projeto de forma mais precisa.
                          </p>

                          <div
                            class="bg-violet-600/10 border border-violet-600/30 rounded-lg p-4"
                          >
                            <h4 class="text-violet-300 font-medium mb-2">
                              📁 Formatos aceitos:
                            </h4>
                            <p class="text-[#9daebe] text-sm">
                              Arquivos .md (Markdown) e .txt são aceitos
                            </p>
                          </div>

                          <div
                            class="border-2 border-dashed border-[#3d4d5c] rounded-lg p-6 text-center"
                          >
                            <input
                              type="file"
                              id="conceptual-files-input"
                              multiple
                              accept=".md,.txt"
                              class="block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100"
                            />
                            <div
                              id="file-list-display"
                              class="mt-3 text-sm text-[#9daebe]"
                            ></div>
                          </div>

                          <div class="flex gap-4">
                            <button
                              class="px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors"
                              onclick="showStep(1)"
                            >
                              ← Etapa Anterior
                            </button>
                            <button
                              class="next-button px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-all"
                              onclick="showStep(3)"
                            >
                              Próxima Etapa →
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Etapa 3: Nome do Projeto -->
                    <div id="step-3-content" class="content-section">
                      <div
                        class="bg-[#1f272e]/50 rounded-xl border border-[#3d4d5c] p-6"
                      >
                        <div class="flex items-center gap-3 mb-6">
                          <div
                            class="w-10 h-10 bg-emerald-600 rounded-lg flex items-center justify-center"
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="20"
                              height="20"
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              class="text-white"
                            >
                              <path d="M9 12l2 2 4-4" />
                              <path
                                d="M21 12c.552 0 1-.448 1-1V5c0-.552-.448-1-1-1H3c-.552 0-1 .448-1 1v6c0 .552.448 1 1 1h9l4-4z"
                              />
                            </svg>
                          </div>
                          <div>
                            <h2 class="text-white text-2xl font-bold">
                              Nome do Projeto
                            </h2>
                            <p class="text-[#9daebe]">
                              Defina um identificador para seu projeto
                            </p>
                          </div>
                        </div>

                        <div class="space-y-4">
                          <p class="text-[#9daebe] leading-relaxed">
                            Escolha um nome claro e descritivo para seu projeto.
                            Este será usado para organizar arquivos e
                            identificar o projeto no histórico. Use nomes como
                            "E-commerce Digital", "Sistema de Gestão", "App
                            Mobile Delivery", etc.
                          </p>

                          <div
                            class="bg-red-600/10 border border-red-600/30 rounded-lg p-4"
                          >
                            <h4 class="text-red-300 font-medium mb-2">
                              ⚠️ Importante:
                            </h4>
                            <p class="text-[#9daebe] text-sm">
                              Esta etapa é obrigatória para continuar. O nome
                              não poderá ser alterado após iniciar o projeto.
                            </p>
                          </div>

                          <div class="space-y-3">
                            <label
                              for="project-name-input"
                              class="text-white text-base font-medium block"
                              >Nome do Projeto</label
                            >
                            <input
                              type="text"
                              id="project-name-input"
                              placeholder="Ex: E-commerce Digital"
                              class="form-input font-mono w-full rounded-xl text-white focus:outline-0 focus:ring-0 border border-[#3d4d5c] bg-[#1f272e] focus:border-emerald-500 h-12 placeholder:text-[#9daebe] p-[15px] text-base font-normal leading-normal"
                            />
                          </div>

                          <div class="flex gap-4">
                            <button
                              class="px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors"
                              onclick="showStep(2)"
                            >
                              ← Etapa Anterior
                            </button>
                            <button
                              id="btn-start-project"
                              class="px-6 py-3 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg font-medium transition-colors"
                            >
                              <span>Iniciar Projeto</span>
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Etapa 4: Linha do Tempo -->
                    <div id="step-4-content" class="content-section hidden">
                      <div class="space-y-6">
                        <div
                          class="bg-[#1f272e]/50 rounded-xl border border-[#3d4d5c] p-6"
                        >
                          <div class="flex items-center gap-3 mb-6">
                            <div
                              class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center"
                            >
                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="20"
                                height="20"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="text-white"
                              >
                                <circle cx="12" cy="12" r="10" />
                                <polyline points="12,6 12,12 16,14" />
                              </svg>
                            </div>
                            <div>
                              <h2 class="text-white text-2xl font-bold">
                                Linha do Tempo do Projeto
                              </h2>
                              <p class="text-[#9daebe]">
                                Acompanhe o progresso das etapas
                              </p>
                            </div>
                          </div>

                          <p class="text-[#9daebe] mb-6 leading-relaxed">
                            A linha do tempo mostra o progresso do seu projeto
                            através das diferentes fases de desenvolvimento.
                            Cada etapa será automaticamente atualizada conforme
                            o Archon AI progride.
                          </p>

                          <div
                            class="border border-[#3d4d5c] rounded-lg overflow-hidden"
                          >
                            <div
                              class="flex border-b border-[#3d4d5c] px-4 gap-8"
                              id="timeline-container"
                            >
                              <!-- Timeline será preenchida pelo JavaScript -->
                            </div>
                          </div>
                        </div>

                        <!-- Painel de Pré-visualização -->
                        <div
                          class="bg-[#1f272e]/50 rounded-xl border border-[#3d4d5c] p-6"
                        >
                          <div class="flex items-center justify-between mb-4">
                            <h3 class="text-white text-lg font-semibold">
                              Painel de Pré-visualização do Resultado
                            </h3>
                            <span
                              id="cache-indicator"
                              class="hidden text-xs font-medium bg-teal-500/20 text-teal-300 px-2 py-1 rounded-md"
                            >
                              Carregado do Cache
                            </span>
                          </div>
                          <textarea
                            id="preview-textarea"
                            class="form-input font-mono w-full resize rounded-xl text-white focus:outline-0 focus:ring-0 border border-[#3d4d5c] bg-[#1f272e] focus:border-[#3d4d5c] h-96 placeholder:text-[#9daebe] p-[15px] text-base font-normal leading-normal"
                            readonly
                          ></textarea>
                        </div>

                        <!-- Painel de Ações do Supervisor -->
                        <div
                          class="bg-[#1f272e]/50 rounded-xl border border-[#3d4d5c] p-6"
                        >
                          <h3 class="text-white text-lg font-semibold mb-4">
                            Painel de Ações do Supervisor
                          </h3>
                          <div class="flex flex-wrap gap-3 mb-4">
                            <button
                              id="btn-approve"
                              class="supervisor-action-btn flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 px-4 bg-[#2b3640] text-white text-sm font-bold leading-normal tracking-[0.015em] border border-[#3d4d5c] hover:bg-[#3d4d5c] transition-colors"
                              disabled
                            >
                              <span>Aprovar</span>
                            </button>
                            <button
                              id="btn-repeat"
                              class="supervisor-action-btn flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 px-4 bg-[#2b3640] text-white text-sm font-bold leading-normal tracking-[0.015em] border border-[#3d4d5c] hover:bg-[#3d4d5c] transition-colors"
                              disabled
                            >
                              <span>Repetir</span>
                            </button>
                            <button
                              id="btn-back"
                              class="supervisor-action-btn flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 px-4 bg-[#2b3640] text-white text-sm font-bold leading-normal tracking-[0.015em] border border-[#3d4d5c] hover:bg-[#3d4d5c] transition-colors"
                              disabled
                            >
                              <span>Voltar</span>
                            </button>
                            <button
                              id="btn-pause"
                              class="supervisor-action-btn flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 px-4 bg-[#2b3640] text-white text-sm font-bold leading-normal tracking-[0.015em] border border-[#3d4d5c] hover:bg-[#3d4d5c] transition-colors"
                              disabled
                            >
                              <span>Pausar</span>
                            </button>
                          </div>

                          <div class="space-y-3">
                            <label
                              class="text-white text-base font-medium block"
                              >Observações / Refinamento com IA</label
                            >
                            <textarea
                              id="observations-textarea"
                              placeholder="Digite observações para o log ou uma pergunta para refinar o resultado com a IA..."
                              class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-white focus:outline-0 focus:ring-0 border border-[#3d4d5c] bg-[#1f272e] focus:border-[#3d4d5c] min-h-24 placeholder:text-[#9daebe] p-[15px] text-base font-normal leading-normal"
                            ></textarea>
                            <button
                              id="btn-consult-ai"
                              class="px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors"
                            >
                              Consultar IA
                            </button>
                          </div>
                        </div>

                        <div class="flex gap-4">
                          <button
                            class="px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors"
                            onclick="showStep(3)"
                          >
                            ← Etapa Anterior
                          </button>
                          <button
                            class="next-button px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-all"
                            onclick="showStep(5)"
                          >
                            Próxima Etapa →
                          </button>
                        </div>
                      </div>
                    </div>

                    <!-- Etapa 5: Histórico de Execução -->
                    <div id="step-5-content" class="content-section hidden">
                      <div
                        class="bg-[#1f272e]/50 rounded-xl border border-[#3d4d5c] p-6"
                      >
                        <div class="flex items-center gap-3 mb-6">
                          <div
                            class="w-10 h-10 bg-purple-600 rounded-lg flex items-center justify-center"
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="20"
                              height="20"
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              class="text-white"
                            >
                              <path d="M3 3v18h18" />
                              <path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3" />
                            </svg>
                          </div>
                          <div>
                            <h2 class="text-white text-2xl font-bold">
                              Histórico de Execução
                            </h2>
                            <p class="text-[#9daebe]">
                              Visualize todas as ações e decisões
                            </p>
                          </div>
                        </div>

                        <div class="space-y-4">
                          <p class="text-[#9daebe] leading-relaxed">
                            O histórico mantém um registro completo de todas as
                            ações realizadas durante o desenvolvimento do
                            projeto, incluindo aprovações, repetições, decisões
                            do supervisor e observações importantes.
                          </p>

                          <div
                            class="bg-purple-600/10 border border-purple-600/30 rounded-lg p-4"
                          >
                            <h4 class="text-purple-300 font-medium mb-2">
                              📊 Informações registradas:
                            </h4>
                            <ul class="text-[#9daebe] text-sm space-y-1">
                              <li>• Etapas executadas e status</li>
                              <li>• Decisões do supervisor</li>
                              <li>• Data e hora das ações</li>
                              <li>• Observações e refinamentos</li>
                            </ul>
                          </div>

                          <div
                            class="overflow-x-auto rounded-xl border border-[#3d4d5c] bg-[#1f272e]"
                          >
                            <table
                              class="min-w-full divide-y divide-[#2b3640] text-white"
                            >
                              <thead>
                                <tr>
                                  <th
                                    class="px-4 py-3 text-left text-xs font-medium text-[#9daebe] uppercase tracking-wider"
                                  >
                                    Etapa
                                  </th>
                                  <th
                                    class="px-4 py-3 text-left text-xs font-medium text-[#9daebe] uppercase tracking-wider"
                                  >
                                    Status
                                  </th>
                                  <th
                                    class="px-4 py-3 text-left text-xs font-medium text-[#9daebe] uppercase tracking-wider"
                                  >
                                    Decisão
                                  </th>
                                  <th
                                    class="px-4 py-3 text-left text-xs font-medium text-[#9daebe] uppercase tracking-wider"
                                  >
                                    Data/Hora
                                  </th>
                                  <th
                                    class="px-4 py-3 text-left text-xs font-medium text-[#9daebe] uppercase tracking-wider"
                                  >
                                    Observação
                                  </th>
                                </tr>
                              </thead>
                              <tbody
                                id="logs-table-body"
                                class="divide-y divide-[#2b3640]"
                              >
                                <tr>
                                  <td
                                    colspan="5"
                                    class="text-center py-8 text-[#9daebe]"
                                  >
                                    Carregando histórico...
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>

                          <div class="flex gap-4">
                            <button
                              class="px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors"
                              onclick="showStep(4)"
                            >
                              ← Etapa Anterior
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  </body>
</html>
